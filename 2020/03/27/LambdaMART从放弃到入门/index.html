<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="MathJax.Hub.Config({ tex2jax: {inlineMath: [[&apos;$&apos;,&apos;$&apos;], [&apos;\\(&apos;,&apos;\\)&apos;]]} });        è¿™ç¯‡æ–‡ç« å¸Œæœ›ç«™ç€æŠŠä¸‰ä»¶äº‹åŠäº†ï¼š  ç†è§£Lambdaï¼› ç†è§£MARTï¼› ç†è§£LambdaMARTã€‚  ã€å¾…è¿›ä¸€æ­¥æ•´ç†ã€‘ Lambdaå…³äºLambdaæ¢¯åº¦è¦ä»RankNetè¯´èµ·ï¼ŒRankNetæå‡ºäº†ä¸€ç§æ¦‚ç‡æŸå¤±å‡½æ•°æ¥å­¦ä¹ Ranking F">
<meta property="og:type" content="article">
<meta property="og:title" content="LambdaMARTä»æ”¾å¼ƒåˆ°å…¥é—¨">
<meta property="og:url" content="http://yoursite.com/2020/03/27/LambdaMARTä»æ”¾å¼ƒåˆ°å…¥é—¨/index.html">
<meta property="og:site_name" content="å°èœé¸¡">
<meta property="og:description" content="MathJax.Hub.Config({ tex2jax: {inlineMath: [[&apos;$&apos;,&apos;$&apos;], [&apos;\\(&apos;,&apos;\\)&apos;]]} });        è¿™ç¯‡æ–‡ç« å¸Œæœ›ç«™ç€æŠŠä¸‰ä»¶äº‹åŠäº†ï¼š  ç†è§£Lambdaï¼› ç†è§£MARTï¼› ç†è§£LambdaMARTã€‚  ã€å¾…è¿›ä¸€æ­¥æ•´ç†ã€‘ Lambdaå…³äºLambdaæ¢¯åº¦è¦ä»RankNetè¯´èµ·ï¼ŒRankNetæå‡ºäº†ä¸€ç§æ¦‚ç‡æŸå¤±å‡½æ•°æ¥å­¦ä¹ Ranking F">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/images/letfly.png">
<meta property="og:image" content="http://yoursite.com/images/boostingTree.png">
<meta property="og:image" content="http://yoursite.com/images/GBRT.png">
<meta property="og:image" content="http://yoursite.com/images/LambdaMART2.png">
<meta property="og:image" content="http://yoursite.com/images/LambdaMART2.png">
<meta property="og:updated_time" content="2020-03-29T17:14:01.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LambdaMARTä»æ”¾å¼ƒåˆ°å…¥é—¨">
<meta name="twitter:description" content="MathJax.Hub.Config({ tex2jax: {inlineMath: [[&apos;$&apos;,&apos;$&apos;], [&apos;\\(&apos;,&apos;\\)&apos;]]} });        è¿™ç¯‡æ–‡ç« å¸Œæœ›ç«™ç€æŠŠä¸‰ä»¶äº‹åŠäº†ï¼š  ç†è§£Lambdaï¼› ç†è§£MARTï¼› ç†è§£LambdaMARTã€‚  ã€å¾…è¿›ä¸€æ­¥æ•´ç†ã€‘ Lambdaå…³äºLambdaæ¢¯åº¦è¦ä»RankNetè¯´èµ·ï¼ŒRankNetæå‡ºäº†ä¸€ç§æ¦‚ç‡æŸå¤±å‡½æ•°æ¥å­¦ä¹ Ranking F">
<meta name="twitter:image" content="http://yoursite.com/images/letfly.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/03/27/LambdaMARTä»æ”¾å¼ƒåˆ°å…¥é—¨/"/>





  <title>LambdaMARTä»æ”¾å¼ƒåˆ°å…¥é—¨ | å°èœé¸¡</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-106410509-1', 'auto');
  ga('send', 'pageview');
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->





</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">å°èœé¸¡</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/27/LambdaMARTä»æ”¾å¼ƒåˆ°å…¥é—¨/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeb">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å°èœé¸¡">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">LambdaMARTä»æ”¾å¼ƒåˆ°å…¥é—¨</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-03-27T11:53:17+08:00">
                2020-03-27
              </time>
            

            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>

<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<p> <img src="/images/letfly.png" alt=""></p>
<p>è¿™ç¯‡æ–‡ç« å¸Œæœ›ç«™ç€æŠŠä¸‰ä»¶äº‹åŠäº†ï¼š</p>
<ol>
<li>ç†è§£Lambdaï¼›</li>
<li>ç†è§£MARTï¼›</li>
<li>ç†è§£LambdaMARTã€‚</li>
</ol>
<p><strong>ã€å¾…è¿›ä¸€æ­¥æ•´ç†ã€‘</strong></p>
<h1 id="Lambda"><a href="#Lambda" class="headerlink" title="Lambda"></a>Lambda</h1><p>å…³äºLambdaæ¢¯åº¦è¦ä»RankNetè¯´èµ·ï¼ŒRankNetæå‡ºäº†ä¸€ç§æ¦‚ç‡æŸå¤±å‡½æ•°æ¥å­¦ä¹ Ranking Functionï¼Œå¹¶åº”ç”¨Ranking Functionå¯¹æ–‡æ¡£è¿›è¡Œæ’åºã€‚LambdaRankåœ¨RankNetçš„åŸºç¡€ä¸Šå¼•å…¥è¯„ä»·æŒ‡æ ‡Z ï¼ˆå¦‚NDCGã€ERRç­‰ï¼‰ï¼Œå…¶æŸå¤±å‡½æ•°çš„æ¢¯åº¦ä»£è¡¨äº†æ–‡æ¡£ä¸‹ä¸€æ¬¡è¿­ä»£ä¼˜åŒ–çš„æ–¹å‘å’Œå¼ºåº¦ï¼Œç”±äºå¼•å…¥äº†IRè¯„ä»·æŒ‡æ ‡ï¼ŒLambdaæ¢¯åº¦æ›´å…³æ³¨ä½ç½®é å‰çš„ä¼˜è´¨æ–‡æ¡£çš„æ’åºä½ç½®çš„æå‡ï¼Œæœ‰æ•ˆçš„é¿å…äº†ä¸‹è°ƒä½ç½®é å‰ä¼˜è´¨æ–‡æ¡£çš„ä½ç½®è¿™ç§æƒ…å†µçš„å‘ç”Ÿã€‚LambdaRankç›¸æ¯”RankNetçš„ä¼˜åŠ¿åœ¨äºåˆ†è§£å› å¼åè®­ç»ƒé€Ÿåº¦å˜å¿«ï¼ŒåŒæ—¶è€ƒè™‘äº†è¯„ä»·æŒ‡æ ‡ï¼Œç›´æ¥å¯¹é—®é¢˜æ±‚è§£ï¼Œæ•ˆæœæ›´æ˜æ˜¾ã€‚ è¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒ<a href="[http://octopuscoder.github.io/2020/01/19/%E6%90%9C%E7%B4%A2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/](http://octopuscoder.github.io/2020/01/19/æœç´¢æ’åºç®—æ³•/">æœç´¢æ’åºç®—æ³•</a>ã€‚</p>
<h1 id="MART"><a href="#MART" class="headerlink" title="MART"></a>MART</h1><p>MART(Multiple Additive Regression Tree)çš„å¦ä¸€ä¸ªåå­—å«GBDT(Gradient Boosting Decision Tree)ï¼Œç†è§£GBDTè¦ä»BTå¼€å§‹ã€‚</p>
<h2 id="æå‡æ ‘"><a href="#æå‡æ ‘" class="headerlink" title="æå‡æ ‘"></a>æå‡æ ‘</h2><p>BT(Boosting Tree)æå‡æ ‘æ˜¯ä»¥<strong>å†³ç­–æ ‘</strong>ä¸ºåŸºæœ¬å­¦ä¹ å™¨çš„æå‡æ–¹æ³•ï¼Œå®ƒè¢«è®¤ä¸ºæ˜¯ç»Ÿè®¡å­¦ä¹ ä¸­æ€§èƒ½æœ€å¥½çš„æ–¹æ³•ä¹‹ä¸€ã€‚å¯¹äºåˆ†ç±»é—®é¢˜ï¼Œæå‡æ ‘çš„å†³ç­–æ ‘æ˜¯äºŒå‰å†³ç­–æ ‘ï¼Œå¯¹äºå›å½’é—®é¢˜ï¼Œæå‡æ ‘ä¸­çš„å†³ç­–æ˜¯äºŒå‰å›å½’æ ‘ã€‚</p>
<p>æå‡æ ‘æ¨¡å‹å¯ä»¥è¡¨ç¤ºä¸ºå†³ç­–æ ‘ä¸ºåŸºå­¦ä¹ å™¨çš„åŠ æ³•æ¨¡å‹ï¼š</p>
<span>$$\begin{gather*}
f(\overrightarrow{\mathbf{x}})=f_{M}(\overrightarrow{\mathbf{x}})=\sum_{m=1}^{M} h_{m}\left(\overrightarrow{\mathbf{x}} ; \Theta_{m}\right)
\end{gather*}$$</span><!-- Has MathJax -->
<p>å…¶ä¸­<span>$h_{m}\left(\overrightarrow{\mathbf{x}} ; \Theta_{m}\right)$</span><!-- Has MathJax -->è¡¨ç¤ºç¬¬mä¸ªå†³ç­–æ ‘ï¼Œ<span>$\Theta_{m}$</span><!-- Has MathJax -->ä¸ºç¬¬mä¸ªå†³ç­–æ ‘çš„å‚æ•°ï¼ŒMä¸ºå†³ç­–æ ‘çš„æ•°é‡ã€‚</p>
<p><strong>æå‡æ ‘</strong>é‡‡ç”¨<strong>å‰å‘åˆ†æ­¥ç®—æ³•</strong>:</p>
<ul>
<li>é¦–å…ˆç¡®å®šåˆå§‹æå‡æ ‘<span>$f_{0}(\overrightarrow{\mathbf{x}})=0$</span><!-- Has MathJax -->ã€‚</li>
<li>ç¬¬mæ­¥æ¨¡å‹ä¸ºï¼š<span>$f_{m}(\overrightarrow{\mathbf{x}})=f_{m-1}(\overrightarrow{\mathbf{x}})+h_{m}\left(\overrightarrow{\mathbf{x}} ; \Theta_{m}\right)$</span><!-- Has MathJax -->ï¼Œå…¶ä¸­<span>$h_{m}(\cdot)$</span><!-- Has MathJax -->ä¸ºå¾…æ±‚çš„ç¬¬mæ£µå†³ç­–æ ‘ã€‚</li>
<li>é€šè¿‡ç»éªŒé£é™©æå°åŒ–ç¡®å®šç¬¬mæ£µå†³ç­–æ ‘çš„å‚æ•°<span>$\Theta_{m}$: $\hat{\Theta}_{m}=\arg \min _{\Theta_{m}} \sum_{i=1}^{N} L\left(\bar{y}_{i}, f_{m}\left(\overrightarrow{\mathbf{x}}_{i}\right)\right)$</span><!-- Has MathJax -->ã€‚è¿™é‡Œæ²¡æœ‰å¼•å…¥æ­£åˆ™é¡¹ï¼Œè€ŒXGBoostä¸­å¼•å…¥äº†æ­£åˆ™é¡¹ã€‚</li>
</ul>
<p>ä¸åŒé—®é¢˜çš„æå‡æ ‘å­¦ä¹ ç®—æ³•ä¸»è¦åŒºåˆ«åœ¨äºä½¿ç”¨çš„æŸå¤±å‡½æ•°ä¸åŒï¼Œï¼ˆè®¾é¢„æµ‹å€¼ä¸º<span>$\tilde{y}$</span><!-- Has MathJax --> ï¼ŒçœŸå®å€¼ä¸º<span>$\hat{y}$</span><!-- Has MathJax -->):</p>
<ul>
<li>å›å½’é—®é¢˜ï¼šé€šå¸¸ä½¿ç”¨å¹³æ–¹è¯¯å·®æŸå¤±å‡½æ•°<span>$L(\tilde{y}, \hat{y})=(\tilde{y}-\hat{y})^{2}$</span><!-- Has MathJax -->ã€‚</li>
<li>åˆ†ç±»é—®é¢˜ï¼šé€šå¸¸ä½¿ç”¨æŒ‡æ•°æŸå¤±å‡½æ•°ï¼š<span>$L(\tilde{y}, \hat{y})=e^{-\tilde{y} \hat{y}}$</span><!-- Has MathJax --></li>
</ul>
<p><strong>æå‡æ ‘</strong>çš„å­¦ä¹ <strong>æ€æƒ³</strong>æœ‰ç‚¹ç±»ä¼¼ä¸€æ‰“é«˜å°”å¤«çƒï¼Œå…ˆç²—ç•¥çš„æ‰“ä¸€æ†ï¼Œç„¶ååœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šé€æ­¥é è¿‘çƒæ´ï¼Œä¹Ÿå°±æ˜¯è¯´<strong>æ¯ä¸€æ£µæ ‘å­¦ä¹ çš„æ˜¯ä¹‹å‰æ‰€æœ‰æ ‘é¢„æµ‹å€¼å’Œçš„æ®‹å·®</strong>ï¼Œè¿™ä¸ª<strong>æ®‹å·®</strong>å°±æ˜¯ä¸€ä¸ªåŠ é¢„æµ‹å€¼åå¾—åˆ°çœŸå®å€¼çš„ç´¯åŠ é‡ã€‚</p>
<p>ä¾‹å¦‚åœ¨å›å½’é—®é¢˜ä¸­ï¼Œæå‡æ ‘é‡‡ç”¨å¹³æ–¹è¯¯å·®æŸå¤±å‡½æ•°ï¼Œæ­¤æ—¶ï¼š</p>
<span>$$\begin{gather*}
\begin{aligned}
L\left(\tilde{y}, f_{m}(\overrightarrow{\mathbf{x}})\right) &amp;=L\left(\tilde{y}, f_{m-1}(\overrightarrow{\mathbf{x}})+h_{m}\left(\overrightarrow{\mathbf{x}} ; \Theta_{m}\right)\right)
=\left(\tilde{y}-f_{m-1}(\overrightarrow{\mathbf{x}})-h_{m}\left(\overrightarrow{\mathbf{x}} ; \Theta_{m}\right)\right)^{2} &amp;=\left(r-h_{m}\left(\overrightarrow{\mathbf{x}} ; \Theta_{m}\right)\right)^{2}
\end{aligned}
\end{gather*}$$</span><!-- Has MathJax -->
<p>å…¶ä¸­<span>$r=\tilde{y}-f_{m-1}(\overrightarrow{\mathbf{x}})$</span><!-- Has MathJax -->ä¸ºå½“å‰æ¨¡å‹æ‹Ÿåˆæ•°æ®çš„æ®‹å·®ã€‚æ‰€ä»¥å¯¹å›å½’é—®é¢˜çš„æå‡æ ‘ç®—æ³•ï¼Œç¬¬mä¸ªå†³ç­–æ ‘ <span>$h_{m}(\cdot)$</span><!-- Has MathJax -->åªéœ€è¦ç®€å•æ‹Ÿåˆå½“å‰æ¨¡å‹çš„æ®‹å·®ã€‚</p>
<p>å›å½’æå‡æ ‘ç®—æ³•å¦‚ä¸‹ï¼š</p>
<p> <img src="/images/boostingTree.png" alt=""></p>
<p>##æ¢¯åº¦æå‡æ ‘(GBT)</p>
<p>ä¸Šé¢æ‰€è®²çš„æå‡æ ‘ä¸­ï¼Œå½“æŸå¤±å‡½æ•°æ˜¯<strong>å¹³æ–¹æŸå¤±å‡½æ•°</strong>å’Œ<strong>æŒ‡æ•°æŸå¤±å‡½æ•°</strong>æ—¶ï¼Œæ¯ä¸€æ­¥ä¼˜åŒ–éƒ½å¾ˆç®€å•ã€‚å› ä¸ºå¹³æ–¹æŸå¤±å‡½æ•°å’ŒæŒ‡æ•°æŸå¤±å‡½æ•°çš„æ±‚å¯¼éå¸¸ç®€å•ã€‚å½“æŸå¤±å‡½æ•°æ˜¯ä¸€èˆ¬å‡½æ•°æ—¶ï¼Œå¾€å¾€æ¯ä¸€æ­¥ä¼˜åŒ–ä¸æ˜¯å¾ˆå®¹æ˜“ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œ<code>Freidman</code>æå‡ºäº†<strong>æ¢¯åº¦æå‡æ ‘ç®—æ³•(GBT)</strong>ã€‚</p>
<blockquote>
<p> <strong>æ¢¯åº¦æå‡æ ‘(GBT)</strong>çš„ä¸€ä¸ªæ ¸å¿ƒæ€æƒ³æ˜¯<strong>åˆ©ç”¨æŸå¤±å‡½æ•°çš„è´Ÿæ¢¯åº¦åœ¨å½“å‰æ¨¡å‹çš„å€¼ä½œä¸ºæ®‹å·®çš„è¿‘ä¼¼å€¼</strong>ï¼Œæœ¬è´¨ä¸Šæ˜¯<strong>å¯¹æŸå¤±å‡½æ•°è¿›è¡Œä¸€é˜¶æ³°å‹’å±•å¼€</strong>ï¼Œä»è€Œæ‹Ÿåˆä¸€ä¸ªå›å½’æ ‘ã€‚</p>
</blockquote>
<p><strong>æ³°å‹’å±•å¼€å…¬å¼ï¼š</strong><br><span>$$\begin{gather*}
TaylorExpansion:f(x+\Delta x) \simeq f(x)+f^{\prime}(x) \Delta x+\frac{1}{2} f^{\prime \prime}(x) \Delta x^{2}
\end{gather*}$$</span><!-- Has MathJax --><br>å°†æŸå¤±å‡½æ•°ä½¿ç”¨<strong>ä¸€é˜¶æ³°å‹’å±•å¼€å…¬å¼</strong>(<span>$\Delta x$</span><!-- Has MathJax -->ç›¸å½“äºè¿™é‡Œçš„<span>$h_{m}\left(\overrightarrow{\mathbf{x}} ; \Theta_{m}\right))$</span><!-- Has MathJax -->ï¼š</p>
<span>$$\begin{gather*}
L\left(\tilde{y}, f_{m}(\overrightarrow{\mathrm{x}})\right)=L\left(\tilde{y}, f_{m-1}(\overrightarrow{\mathrm{x}})+h_{m}\left(\overrightarrow{\mathrm{x}} ; \Theta_{m}\right)\right)=L\left(\tilde{y}, f_{m-1}(\overrightarrow{\mathrm{x}})\right)+\frac{\partial L\left(\tilde{y}, f_{m-1}(\overrightarrow{\mathrm{x}})\right)}{\partial f_{m-1}(\overrightarrow{\mathrm{x}})} h_{m}\left(\overrightarrow{\mathrm{x}} ; \Theta_{m}\right)
\end{gather*}$$</span><!-- Has MathJax -->
<p>åˆ™æœ‰ï¼š</p>
<span>$$\begin{gather*}
\Delta L=L\left(\tilde{y}, f_{m}(\overrightarrow{\mathbf{x}})\right)-L\left(\tilde{y}, f_{m-1}(\overrightarrow{\mathbf{x}})\right)=\frac{\partial L\left(\tilde{y}, f_{m-1}(\overrightarrow{\mathbf{x}})\right)}{\partial f_{m-1}(\overrightarrow{\mathbf{x}})} h_{m}\left(\overrightarrow{\mathbf{x}} ; \Theta_{m}\right)
\end{gather*}$$</span><!-- Has MathJax -->
<p>è¦ä½¿å¾—æŸå¤±å‡½æ•°é™ä½ï¼Œåˆ™æ ¹æ®æ¢¯åº¦ä¸‹é™çš„æ€æƒ³è®©æŸå¤±å‡½æ•°å¯¹<span>$h_{m}\left(\overrightarrow{\mathbf{x}} ; \mathbf{\Theta}_{m}\right)$</span><!-- Has MathJax -->è¿›è¡Œæ±‚å¯¼ï¼ŒæŒ‰ç…§è´Ÿæ¢¯åº¦æ›´æ–°æ”¹å€¼ï¼Œåˆ™æŸå¤±å‡½æ•°æ˜¯ä¸‹é™çš„ï¼Œå³ï¼š<span>$h_{m}\left(\overrightarrow{\mathbf{x}} ; \Theta_{m}\right)=-\frac{\partial L\left(\tilde{y}, f_{m-1}(\overrightarrow{\mathbf{x}})\right)}{\partial f_{m-1}(\overrightarrow{\mathbf{x}})}$</span><!-- Has MathJax --></p>
<ul>
<li>å¯¹äºå¹³æ–¹æŸå¤±å‡½æ•°ï¼Œå®ƒå°±æ˜¯é€šå¸¸æ„ä¹‰çš„æ®‹å·®ã€‚</li>
<li>å¯¹äºä¸€èˆ¬æŸå¤±å‡½æ•°ï¼Œå®ƒå°±æ˜¯æ®‹å·®çš„è¿‘ä¼¼ã€‚</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬ç›¸å½“äºè·å¾—äº†æ ·æœ¬çš„æ ‡ç­¾ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç”¨è¿™ä¸ªæ ‡ç­¾æ¥è®­ç»ƒå†³ç­–æ ‘ã€‚</p>
<p>å¦å¤–ï¼Œæ¢¯åº¦æå‡æ ‘ç”¨äºåˆ†ç±»æ¨¡å‹æ—¶ï¼Œæ˜¯<strong>æ¢¯åº¦æå‡å†³ç­–æ ‘<code>GBDT</code></strong>ï¼›ç”¨äºå›å½’æ¨¡å‹æ—¶ï¼Œæ˜¯<strong>æ¢¯åº¦æå‡å›å½’æ ‘<code>GBRT</code>ï¼Œ</strong>äºŒè€…çš„åŒºåˆ«ä¸»è¦æ˜¯æŸå¤±å‡½æ•°ä¸åŒã€‚</p>
<p><strong>GBRT</strong>ç®—æ³•çš„ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<p> <img src="/images/GBRT.png" alt=""></p>
<p>å¦å¤–ï¼ŒFreidmanä»baggingç­–ç•¥å—åˆ°å¯å‘ï¼Œé‡‡ç”¨<strong>éšæœºæ¢¯åº¦æå‡</strong>æ¥ä¿®æ”¹äº†åŸå§‹çš„æ¢¯åº¦æå‡ç®—æ³•ï¼Œå³æ¯ä¸€è½®è¿­ä»£ä¸­ï¼Œæ–°çš„å†³ç­–æ ‘æ‹Ÿåˆçš„æ˜¯åŸå§‹è®­ç»ƒé›†çš„ä¸€ä¸ªå­é›†ï¼ˆè€Œå¹¶ä¸æ˜¯åŸå§‹è®­ç»ƒé›†ï¼‰çš„æ®‹å·®ï¼Œè¿™ä¸ªå­é›†æ˜¯é€šè¿‡å¯¹åŸå§‹è®­ç»ƒé›†çš„æ— æ”¾å›éšæœºé‡‡æ ·è€Œæ¥ï¼Œç±»ä¼¼äºè‡ªåŠ©é‡‡æ ·æ³•ã€‚è¿™ç§æ–¹æ³•<strong>å¼•å…¥äº†éšæœºæ€§ï¼Œæœ‰åŠ©äºæ”¹å–„è¿‡æ‹Ÿåˆ</strong>ï¼Œå¦ä¸€ä¸ªå¥½å¤„æ˜¯<strong>æœªè¢«é‡‡æ ·çš„å¦ä¸€éƒ¨åˆ†å­—é›†å¯ä»¥ç”¨æ¥è®¡ç®—åŒ…å¤–ä¼°è®¡è¯¯å·®</strong>ã€‚</p>
<p>è¿™æ—¶æˆ‘ä»¬å†çœ‹ä¸€ä¸‹LambdaMARTç®—æ³•çš„æµç¨‹ï¼š</p>
<p><img src="/images/LambdaMART2.png" alt=""></p>
<p>å¯¹æ¯”GBRTå’ŒLambdaMARTç®—æ³•æµç¨‹å¯ä»¥å‘ç°ä¸¤è€…éå¸¸ç›¸ä¼¼ï¼Œä¸»è¦åŒºåˆ«æ˜¯LambdaMARTå°†GBRTä¸­è¦æ‹Ÿåˆçš„è´Ÿæ¢¯åº¦æ›¿æ¢ä¸ºLambdaæ¢¯åº¦ï¼Œè€ŒLambdaMARTå¯¹æ’åºçš„æœ€æ ¸å¿ƒçš„æ”¹è¿›æ­£æ˜¯è¿™ä¸ªLambdaæ¢¯åº¦ï¼Œå…·ä½“ä»‹ç»å¯ä»¥å‚è€ƒ<a href="[http://octopuscoder.github.io/2020/01/19/%E6%90%9C%E7%B4%A2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/](http://octopuscoder.github.io/2020/01/19/æœç´¢æ’åºç®—æ³•/">æœç´¢æ’åºç®—æ³•</a>)ä¸­å…³äºRankNetå’ŒLambdaRankçš„ä»‹ç»ã€‚</p>
<h2 id="XBGoost"><a href="#XBGoost" class="headerlink" title="XBGoost"></a>XBGoost</h2><p>è¿™é‡Œæ—¢ç„¶æåˆ°äº†æå‡æ ‘å’Œæ¢¯åº¦æå‡æ ‘ï¼Œé‚£ä¹ˆé¡ºä¾¿ä¹Ÿä»‹ç»ä¸€ä¸‹å¤§åé¼é¼çš„XGBoostï¼Œè¿™éƒ¨åˆ†ä»‹ç»å®Œåæˆ‘ä»¬å†æ¢LambdaMARTçš„ä¸€äº›ç»†èŠ‚ã€‚</p>
<p><strong>Xgboost</strong>ä¹Ÿä½¿ç”¨ä¸æå‡æ ‘ç›¸åŒçš„<strong>å‰å‘åˆ†æ­¥ç®—æ³•ï¼Œ</strong>å…¶åŒºåˆ«åœ¨äºï¼šXgboosté€šè¿‡<strong>ç»“æ„é£é™©æœ€å°åŒ–</strong>æ¥ç¡®å®šä¸‹ä¸€ä¸ªå†³ç­–æ ‘çš„å‚æ•°$\Theta_{m}$ï¼š</p>
<span>$\hat{\Theta}_{m}=\arg \min _{\Theta_{m}} \sum_{i=1}^{N} L\left(\tilde{y}_{i}, f_{m}\left(\overrightarrow{\mathbf{x}}_{i}\right)\right)+\Omega\left(h_{m}(\overrightarrow{\mathbf{x}})\right)$</span><!-- Has MathJax -->
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><span>$\Omega\left(h_{m}\right)$</span><!-- Has MathJax -->ä¸ºç¬¬mä¸ªå†³ç­–æ ‘çš„æ­£åˆ™åŒ–é¡¹ï¼Œè¿™æ˜¯XGBoostå’ŒGBTçš„ä¸€ä¸ªé‡è¦åŒºåˆ«ã€‚</li>
<li><span>$\mathcal{L}=\sum_{i=1}^{N} L\left(\tilde{y}_{i}, f_{m}\left(\overrightarrow{\mathbf{x}}_{i}\right)\right)+\Omega\left(h_{m}(\overrightarrow{\mathbf{x}})\right)$</span><!-- Has MathJax -->ä¸ºç›®æ ‡å‡½æ•°ã€‚</li>
</ul>
<p>ä¸æå‡æ ‘ä¸åŒçš„æ˜¯<strong>ï¼ŒXgboost</strong>è¿˜ä½¿ç”¨äº†<strong>äºŒé˜¶æ³°å‹’å±•å¼€</strong>ï¼Œå®šä¹‰ï¼š</p>
<span>$\hat{y}_{i}^{&lt;m-1&gt;}=f_{m-1}\left(\overrightarrow{\mathbf{x}}_{i}\right), \quad g_{i}=\frac{\partial L\left(\tilde{y}_{i}, \hat{y}_{i}^{&lt;m-1&gt;}\right)}{\partial \hat{y}_{i}^{&lt;m-1&gt;}}, \quad h_{i}=\frac{\partial^{2} L\left(\tilde{y}_{i}, \hat{y}_{i}^{&lt;m-1&gt;}\right)}{\partial^{2} \hat{y}_{i}^{&lt;m-1&gt;}}$</span><!-- Has MathJax -->
<p>å…¶ä¸­ï¼Œ<span>$g_{i}, h_{i}$</span><!-- Has MathJax -->åˆ†åˆ«æ˜¯æŸå¤±å‡½æ•°<span>$L\left(\tilde{y}_{i}, \hat{y}_{i}^{&lt;m-1&gt;}\right)$</span><!-- Has MathJax -->å¯¹<span>$\hat{y}_{i}^{&lt;m-1&gt;}$</span><!-- Has MathJax -->çš„ä¸€é˜¶å¯¼æ•°å’ŒäºŒé˜¶å¯¼æ•°ã€‚å†çœ‹<strong>æ³°å‹’å±•å¼€å¼</strong>ï¼š</p>
<p>Taylor expansion <span>$f(x+\Delta x) \simeq f(x)+f^{\prime}(x) \Delta x+\frac{1}{2} f^{\prime \prime}(x) \Delta x^{2}$</span><!-- Has MathJax --></p>
<p>å› æ­¤æˆ‘ä»¬å¯¹æŸå¤±å‡½æ•°äºŒé˜¶æ³°å‹’å±•å¼€æœ‰ï¼ˆ<span>$\Delta x$</span><!-- Has MathJax -->ç›¸å½“äºè¿™é‡Œçš„<span>$h_{m}(\overrightarrow{\mathbf{x}})$</span><!-- Has MathJax -->ï¼‰</p>
<span>$$\begin{gather*}
\begin{aligned} \mathcal{L} &amp;=\sum_{i=1}^{N} L\left(\tilde{y}_{i}, f_{m}\left(\overrightarrow{\mathbf{x}}_{i}\right)\right)+\Omega\left(h_{m}(\overrightarrow{\mathbf{x}})\right)=\sum_{i=1}^{N} L\left(\tilde{y}_{i}, \hat{y}_{i}^{&lt;m-1&gt;}+h_{m}\left(\overrightarrow{\mathbf{x}}_{i}\right)\right)+\Omega\left(h_{m}(\overrightarrow{\mathbf{x}})\right) \\ &amp; \simeq \sum_{i=1}^{N}\left[L\left(\tilde{y}_{i}, \hat{y}_{i}^{&lt;m-1&gt;}\right)+g_{i} h_{m}\left(\overrightarrow{\mathbf{x}}_{i}\right)+\frac{1}{2} h_{i} h_{m}^{2}\left(\overrightarrow{\mathbf{x}}_{i}\right)\right]+\Omega\left(h_{m}(\overrightarrow{\mathbf{x}})\right)+\text { constant } \end{aligned}
\end{gather*}$$</span><!-- Has MathJax -->
<p><strong>æå‡æ ‘(GBT)</strong>åªä½¿ç”¨äº†ä¸€é˜¶æ³°å‹’å±•å¼€ã€‚è€ŒXGBoostçš„æ­£åˆ™åŒ–é¡¹ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š<span>$\Omega\left(h_{m}(\overrightarrow{\mathbf{x}})\right)=\gamma T+\frac{1}{2} \lambda \sum_{j=1}^{T} w_{j}^{2}$</span><!-- Has MathJax --></p>
<p>è¯¥éƒ¨åˆ†è¡¨ç¤º<strong>å†³ç­–æ ‘çš„å¤æ‚åº¦ï¼Œ</strong>å…¶ä¸­Tä¸ºå¶èŠ‚ç‚¹çš„ä¸ªæ•°ï¼Œ$w_{j}$ä¸ºæ¯ä¸ªå¶èŠ‚ç‚¹çš„è¾“å‡ºå€¼ï¼Œ$\gamma, \lambda \geq 0$ä¸ºç³»æ•°ï¼Œæ§åˆ¶è¿™ä¸¤ä¸ªéƒ¨åˆ†çš„æ¯”é‡ã€‚</p>
<ul>
<li>å¶ç»“ç‚¹è¶Šå¤šï¼Œåˆ™å†³ç­–æ ‘è¶Šå¤æ‚ã€‚</li>
<li>æ¯ä¸ªå¶ç»“ç‚¹è¾“å‡ºå€¼çš„ç»å¯¹å€¼è¶Šå¤§ï¼Œåˆ™å†³ç­–æ ‘è¶Šå¤æ‚ã€‚</li>
</ul>
<blockquote>
<p>è¯¥å¤æ‚åº¦æ˜¯ä¸€ä¸ªç»éªŒå…¬å¼ã€‚äº‹å®ä¸Šè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„å®šä¹‰å¤æ‚åº¦çš„æ–¹å¼ï¼Œåªæ˜¯è¿™ä¸ªå…¬å¼æ•ˆæœè¿˜ä¸é”™ã€‚</p>
</blockquote>
<p><strong>Xgboost</strong>ç›¸æ¯”ä¸<strong>GBDT</strong>ï¼š</p>
<ol>
<li><p>ä¼ ç»ŸGBDTåœ¨ä¼˜åŒ–æ—¶åªç”¨åˆ°ä¸€é˜¶å¯¼æ•°ä¿¡æ¯ï¼Œxgbooståˆ™å¯¹ä»£ä»·å‡½æ•°è¿›è¡Œäº†<strong>äºŒé˜¶æ³°å‹’å±•å¼€ï¼ŒåŒæ—¶ç”¨åˆ°äº†ä¸€é˜¶å’ŒäºŒé˜¶å¯¼æ•°</strong>ã€‚é¡ºä¾¿æä¸€ä¸‹ï¼Œxgboostå·¥å…·æ”¯æŒè‡ªå®šä¹‰ä»£ä»·å‡½æ•°ï¼Œåªè¦å‡½æ•°å¯ä¸€é˜¶å’ŒäºŒé˜¶æ±‚å¯¼ã€‚ä¾‹å¦‚ï¼Œxgboostæ”¯æŒçº¿æ€§åˆ†ç±»å™¨ï¼Œè¿™ä¸ªæ—¶å€™xgboostç›¸å½“äºå¸¦L1å’ŒL2æ­£åˆ™åŒ–é¡¹çš„é€»è¾‘æ–¯è’‚å›å½’ï¼ˆåˆ†ç±»é—®é¢˜ï¼‰æˆ–è€…çº¿æ€§å›å½’ï¼ˆå›å½’é—®é¢˜ï¼‰</p>
</li>
<li><p>xgbooståœ¨<strong>ä»£ä»·å‡½æ•°é‡ŒåŠ å…¥äº†æ­£åˆ™é¡¹ï¼Œç”¨äºæ§åˆ¶æ¨¡å‹çš„å¤æ‚åº¦</strong>ã€‚æ­£åˆ™é¡¹é‡ŒåŒ…å«äº†æ ‘çš„å¶å­èŠ‚ç‚¹ä¸ªæ•°ã€æ¯ä¸ªå¶å­èŠ‚ç‚¹ä¸Šè¾“å‡ºçš„scoreçš„L2æ¨¡çš„å¹³æ–¹å’Œã€‚ä»Bias-variance tradeoffè§’åº¦æ¥è®²ï¼Œæ­£åˆ™é¡¹é™ä½äº†æ¨¡å‹çš„varianceï¼Œä½¿å­¦ä¹ å‡ºæ¥çš„æ¨¡å‹æ›´åŠ ç®€å•ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆï¼Œè¿™ä¹Ÿæ˜¯xgboostä¼˜äºä¼ ç»ŸGBDTçš„ä¸€ä¸ªç‰¹æ€§ã€‚</p>
</li>
<li><p><strong>åˆ—æŠ½æ ·ï¼ˆcolumn subsamplingï¼‰</strong>ã€‚xgboostå€Ÿé‰´äº†éšæœºæ£®æ—çš„åšæ³•ï¼Œæ”¯æŒåˆ—æŠ½æ ·ï¼ˆå³æ¯æ¬¡çš„è¾“å…¥ç‰¹å¾ä¸æ˜¯å…¨éƒ¨ç‰¹å¾ï¼‰ï¼Œä¸ä»…èƒ½é™ä½è¿‡æ‹Ÿåˆï¼Œè¿˜èƒ½å‡å°‘è®¡ç®—ï¼Œè¿™ä¹Ÿæ˜¯xgboostå¼‚äºä¼ ç»Ÿgbdtçš„ä¸€ä¸ªç‰¹æ€§ã€‚</p>
</li>
<li><p><strong>å¹¶è¡ŒåŒ–å¤„ç†</strong>ï¼šåœ¨è®­ç»ƒä¹‹å‰ï¼Œé¢„å…ˆå¯¹æ¯ä¸ªç‰¹å¾å†…éƒ¨è¿›è¡Œäº†æ’åºæ‰¾å‡ºå€™é€‰åˆ‡å‰²ç‚¹ï¼Œç„¶åä¿å­˜ä¸ºblockç»“æ„ï¼Œåé¢çš„è¿­ä»£ä¸­é‡å¤åœ°ä½¿ç”¨è¿™ä¸ªç»“æ„ï¼Œå¤§å¤§å‡å°è®¡ç®—é‡ã€‚åœ¨è¿›è¡ŒèŠ‚ç‚¹çš„åˆ†è£‚æ—¶ï¼Œéœ€è¦è®¡ç®—æ¯ä¸ªç‰¹å¾çš„å¢ç›Šï¼Œæœ€ç»ˆé€‰å¢ç›Šæœ€å¤§çš„é‚£ä¸ªç‰¹å¾å»åšåˆ†è£‚ï¼Œé‚£ä¹ˆå„ä¸ªç‰¹å¾çš„å¢ç›Šè®¡ç®—å°±å¯ä»¥å¼€å¤šçº¿ç¨‹è¿›è¡Œï¼Œå³åœ¨ä¸åŒçš„ç‰¹å¾å±æ€§ä¸Šé‡‡ç”¨å¤šçº¿ç¨‹å¹¶è¡Œæ–¹å¼å¯»æ‰¾æœ€ä½³åˆ†å‰²ç‚¹ã€‚</p>
</li>
</ol>
<p><strong>ç›¸æ¯”äºGBDTï¼ŒXgboostæœ€é‡è¦çš„ä¼˜ç‚¹è¿˜æ˜¯ç”¨åˆ°äº†äºŒé˜¶æ³°å‹’å±•å¼€ä¿¡æ¯å’ŒåŠ å…¥æ­£åˆ™é¡¹</strong> ã€‚</p>
<h1 id="LambdaMART"><a href="#LambdaMART" class="headerlink" title="LambdaMART"></a>LambdaMART</h1><p>LambdaMARTç®—æ³•çš„æµç¨‹ï¼š</p>
<p><img src="/images/LambdaMART2.png" alt=""></p>
<p>å¶å­ç»“ç‚¹è¾“å‡ºå€¼çš„è®¡ç®—é‡‡ç”¨ç‰›é¡¿è¿­ä»£æ³•ï¼Œå¯¹äºä¸€ä¸ªå‡½æ•°<span>$g(\gamma)$</span><!-- Has MathJax -->ï¼Œä¸ºäº†æ‰¾åˆ°$\gamma$ä½¿å¾—å‡½æ•°$g$å–å¾—æå°ï¼ˆå¤§ï¼‰å€¼é‡‡ç”¨ç‰›é¡¿è¿­ä»£æ³•çš„è¿­ä»£æ­¥éª¤ä¸ºï¼š</p>
<span>$$\begin{gather*}

\gamma_{n+1}=\gamma_{n}-\frac{g^{\prime}\left(\gamma_{n}\right)}{g^{\prime \prime}\left(\gamma_{n}\right)}

\end{gather*}$$</span><!-- Has MathJax -->
<p>ç›¸åº”åœ°ï¼ŒLambdaMARTç¬¬mæ£µæ ‘ä¸­ç¬¬kä¸ªå¶å­ç»“ç‚¹çš„è¾“å‡ºå€¼è®¡ç®—å…¬å¼ä¸ºï¼š</p>
<span>$$\begin{gather*}

\gamma_{k m}=\frac{\sum_{x_{i} \in R_{k m}} \frac{\partial C}{\partial s_{i}}}{\sum_{x_{i} \in R_{k m}} \frac{\partial^{2} C}{\partial s_{i}^{2}}}=\frac{-\sum_{x_{i} \in R_{k m}} \sum_{\{i, j\} \rightleftharpoons I}\left|\Delta Z_{i j}\right| \rho_{i j}}{\sum_{x_{i} \in R_{k m}} \sum_{\{i, j\} \rightleftharpoons I}\left|\Delta Z_{i j}\right| \sigma \rho_{i j}\left(1-\rho_{i j}\right)}

\end{gather*}$$</span><!-- Has MathJax -->
<p>å…·ä½“åŸç†å¯ä»¥å‚è€ƒ<a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/MSR-TR-2010-82.pdf" target="_blank" rel="external">From RankNet to LambdaRank to LambdaMART: An Overview</a></p>
<p>ä¸‹é¢æˆ‘ä»¬åŸºäºRanklibæºç å’Œä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥è¿›ä¸€æ­¥ç†è§£LambdaMARTç®—æ³•çš„è¿‡ç¨‹ã€‚Ranklibæ˜¯Learning to Ranké¢†åŸŸçš„ä¸€ä¸ªä¼˜ç§€çš„å¼€æºç®—æ³•åº“ï¼Œå®ç°äº†MART,RankNet,RankBoost,LambdaMart,Random Forestç­‰æ¨¡å‹ï¼Œä»£ç ä¸ºJavaã€‚æˆ‘ä»¬è¿™é‡ŒåŸºäºå¾®è½¯å‘å¸ƒçš„LambdaMARTæ¥è¿›è¡Œä»‹ç»ï¼ŒLambdaMART.javaä¸­çš„LambdaMART.learn()æ˜¯å­¦ä¹ æµç¨‹çš„ç®¡æ§å‡½æ•°ï¼Œå­¦ä¹ è¿‡ç¨‹ä¸»è¦æœ‰ä¸‹é¢å››æ­¥æ„æˆï¼š</p>
<ol>
<li><p>è®¡ç®—deltaNDCGä»¥åŠlambda;</p>
</li>
<li><p>ä»¥lambdaä½œä¸ºlabelè®­ç»ƒä¸€æ£µregression tree;</p>
</li>
<li><p>åœ¨treeçš„æ¯ä¸ªå¶å­èŠ‚ç‚¹é€šè¿‡é¢„æµ‹çš„regression lambdaå€¼è¿˜åŸå‡ºgammaï¼Œå³æœ€ç»ˆè¾“å‡ºå¾—åˆ†ï¼›</p>
</li>
<li><p>ç”¨3çš„æ¨¡å‹é¢„æµ‹æ‰€æœ‰è®­ç»ƒé›†åˆä¸Šçš„å¾—åˆ†ï¼ˆ+learningRate*gammaï¼‰,ç„¶åç”¨è¿™ä¸ªå¾—åˆ†å¯¹æ¯ä¸ªqueryçš„ç»“æœæ’åºï¼Œè®¡ç®—æ–°çš„æ¯ä¸ªqueryçš„base ndcgï¼Œä»¥æ­¤ä¸ºåŸºç¡€å›åˆ°ç¬¬1æ­¥ï¼Œç»„æˆæ£®æ—ã€‚</p>
</li>
</ol>
<p>é‡å¤è¿™ä¸ªæ­¥éª¤ï¼Œç›´åˆ°æ»¡è¶³ä¸‹åˆ—ä¸¤ä¸ªæ”¶æ•›æ¡ä»¶ä¹‹ä¸€ï¼š</p>
<ol>
<li><p>æ ‘çš„ä¸ªæ•°è¾¾åˆ°è®­ç»ƒå‚æ•°è®¾ç½®ï¼›</p>
</li>
<li><p>Random Foreståœ¨validationé›†åˆä¸Šæ²¡æœ‰å˜å¥½ã€‚</p>
</li>
</ol>
<p>ä¸‹é¢ç”¨ä¸€ç»„å®é™…çš„æ•°æ®æ¥è¯´æ˜æ•´ä¸ªè®¡ç®—è¿‡ç¨‹ï¼Œå‡è®¾æˆ‘ä»¬æœ‰10ä¸ªqueryçš„è®­ç»ƒæ•°æ®ï¼Œæ¯ä¸ªqueryä¸‹æœ‰10ä¸ªdocï¼Œæ¯ä¸ªquery-docå¯¹æœ‰10ä¸ªfeatureï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="number">0</span> qid:<span class="number">1830</span> <span class="number">1</span>:<span class="number">0.002736</span> <span class="number">2</span>:<span class="number">0.000000</span> <span class="number">3</span>:<span class="number">0.000000</span> <span class="number">4</span>:<span class="number">0.000000</span> <span class="number">5</span>:<span class="number">0.002736</span> <span class="number">6</span>:<span class="number">0.000000</span> <span class="number">7</span>:<span class="number">0.000000</span> <span class="number">8</span>:<span class="number">0.000000</span> <span class="number">9</span>:<span class="number">0.000000</span> <span class="number">10</span>:<span class="number">0.000000</span></div><div class="line"><span class="number">0</span> qid:<span class="number">1830</span> <span class="number">1</span>:<span class="number">0.025992</span> <span class="number">2</span>:<span class="number">0.125000</span> <span class="number">3</span>:<span class="number">0.000000</span> <span class="number">4</span>:<span class="number">0.000000</span> <span class="number">5</span>:<span class="number">0.027360</span> <span class="number">6</span>:<span class="number">0.000000</span> <span class="number">7</span>:<span class="number">0.000000</span> <span class="number">8</span>:<span class="number">0.000000</span> <span class="number">9</span>:<span class="number">0.000000</span> <span class="number">10</span>:<span class="number">0.000000</span></div><div class="line"><span class="number">0</span> qid:<span class="number">1830</span> <span class="number">1</span>:<span class="number">0.001368</span> <span class="number">2</span>:<span class="number">0.000000</span> <span class="number">3</span>:<span class="number">0.000000</span> <span class="number">4</span>:<span class="number">0.000000</span> <span class="number">5</span>:<span class="number">0.001368</span> <span class="number">6</span>:<span class="number">0.000000</span> <span class="number">7</span>:<span class="number">0.000000</span> <span class="number">8</span>:<span class="number">0.000000</span> <span class="number">9</span>:<span class="number">0.000000</span> <span class="number">10</span>:<span class="number">0.000000</span></div><div class="line"><span class="number">1</span> qid:<span class="number">1830</span> <span class="number">1</span>:<span class="number">0.188782</span> <span class="number">2</span>:<span class="number">0.375000</span> <span class="number">3</span>:<span class="number">0.333333</span> <span class="number">4</span>:<span class="number">1.000000</span> <span class="number">5</span>:<span class="number">0.195622</span> <span class="number">6</span>:<span class="number">0.000000</span> <span class="number">7</span>:<span class="number">0.000000</span> <span class="number">8</span>:<span class="number">0.000000</span> <span class="number">9</span>:<span class="number">0.000000</span> <span class="number">10</span>:<span class="number">0.000000</span></div><div class="line"><span class="number">1</span> qid:<span class="number">1830</span> <span class="number">1</span>:<span class="number">0.077975</span> <span class="number">2</span>:<span class="number">0.500000</span> <span class="number">3</span>:<span class="number">0.666667</span> <span class="number">4</span>:<span class="number">0.000000</span> <span class="number">5</span>:<span class="number">0.086183</span> <span class="number">6</span>:<span class="number">0.000000</span> <span class="number">7</span>:<span class="number">0.000000</span> <span class="number">8</span>:<span class="number">0.000000</span> <span class="number">9</span>:<span class="number">0.000000</span> <span class="number">10</span>:<span class="number">0.000000</span></div><div class="line"><span class="number">0</span> qid:<span class="number">1830</span> <span class="number">1</span>:<span class="number">0.075239</span> <span class="number">2</span>:<span class="number">0.125000</span> <span class="number">3</span>:<span class="number">0.333333</span> <span class="number">4</span>:<span class="number">0.000000</span> <span class="number">5</span>:<span class="number">0.077975</span> <span class="number">6</span>:<span class="number">0.000000</span> <span class="number">7</span>:<span class="number">0.000000</span> <span class="number">8</span>:<span class="number">0.000000</span> <span class="number">9</span>:<span class="number">0.000000</span> <span class="number">10</span>:<span class="number">0.000000</span></div><div class="line"><span class="number">1</span> qid:<span class="number">1830</span> <span class="number">1</span>:<span class="number">0.079343</span> <span class="number">2</span>:<span class="number">0.250000</span> <span class="number">3</span>:<span class="number">0.666667</span> <span class="number">4</span>:<span class="number">0.000000</span> <span class="number">5</span>:<span class="number">0.084815</span> <span class="number">6</span>:<span class="number">0.000000</span> <span class="number">7</span>:<span class="number">0.000000</span> <span class="number">8</span>:<span class="number">0.000000</span> <span class="number">9</span>:<span class="number">0.000000</span> <span class="number">10</span>:<span class="number">0.000000</span></div><div class="line"><span class="number">1</span> qid:<span class="number">1830</span> <span class="number">1</span>:<span class="number">0.147743</span> <span class="number">2</span>:<span class="number">0.000000</span> <span class="number">3</span>:<span class="number">0.000000</span> <span class="number">4</span>:<span class="number">0.000000</span> <span class="number">5</span>:<span class="number">0.147743</span> <span class="number">6</span>:<span class="number">0.000000</span> <span class="number">7</span>:<span class="number">0.000000</span> <span class="number">8</span>:<span class="number">0.000000</span> <span class="number">9</span>:<span class="number">0.000000</span> <span class="number">10</span>:<span class="number">0.000000</span></div><div class="line"><span class="number">0</span> qid:<span class="number">1830</span> <span class="number">1</span>:<span class="number">0.058824</span> <span class="number">2</span>:<span class="number">0.000000</span> <span class="number">3</span>:<span class="number">0.000000</span> <span class="number">4</span>:<span class="number">0.000000</span> <span class="number">5</span>:<span class="number">0.058824</span> <span class="number">6</span>:<span class="number">0.000000</span> <span class="number">7</span>:<span class="number">0.000000</span> <span class="number">8</span>:<span class="number">0.000000</span> <span class="number">9</span>:<span class="number">0.000000</span> <span class="number">10</span>:<span class="number">0.000000</span></div><div class="line"><span class="number">0</span> qid:<span class="number">1830</span> <span class="number">1</span>:<span class="number">0.071135</span> <span class="number">2</span>:<span class="number">0.125000</span> <span class="number">3</span>:<span class="number">0.333333</span> <span class="number">4</span>:<span class="number">0.000000</span> <span class="number">5</span>:<span class="number">0.073871</span> <span class="number">6</span>:<span class="number">0.000000</span> <span class="number">7</span>:<span class="number">0.000000</span> <span class="number">8</span>:<span class="number">0.000000</span> <span class="number">9</span>:<span class="number">0.000000</span> <span class="number">10</span>:<span class="number">0.000000</span></div><div class="line"><span class="number">1</span> qid:<span class="number">1840</span> <span class="number">1</span>:<span class="number">0.007364</span> <span class="number">2</span>:<span class="number">0.200000</span> <span class="number">3</span>:<span class="number">1.000000</span> <span class="number">4</span>:<span class="number">0.500000</span> <span class="number">5</span>:<span class="number">0.013158</span> <span class="number">6</span>:<span class="number">0.000000</span> <span class="number">7</span>:<span class="number">0.000000</span> <span class="number">8</span>:<span class="number">0.000000</span> <span class="number">9</span>:<span class="number">0.000000</span> <span class="number">10</span>:<span class="number">0.000000</span></div><div class="line"><span class="number">1</span> qid:<span class="number">1840</span> <span class="number">1</span>:<span class="number">0.097202</span> <span class="number">2</span>:<span class="number">0.000000</span> <span class="number">3</span>:<span class="number">0.000000</span> <span class="number">4</span>:<span class="number">0.000000</span> <span class="number">5</span>:<span class="number">0.096491</span> <span class="number">6</span>:<span class="number">0.000000</span> <span class="number">7</span>:<span class="number">0.000000</span> <span class="number">8</span>:<span class="number">0.000000</span> <span class="number">9</span>:<span class="number">0.000000</span> <span class="number">10</span>:<span class="number">0.000000</span></div><div class="line"><span class="number">2</span> qid:<span class="number">1840</span> <span class="number">1</span>:<span class="number">0.169367</span> <span class="number">2</span>:<span class="number">0.000000</span> <span class="number">3</span>:<span class="number">0.500000</span> <span class="number">4</span>:<span class="number">0.000000</span> <span class="number">5</span>:<span class="number">0.169591</span> <span class="number">6</span>:<span class="number">0.000000</span> <span class="number">7</span>:<span class="number">0.000000</span> <span class="number">8</span>:<span class="number">0.000000</span> <span class="number">9</span>:<span class="number">0.000000</span> <span class="number">10</span>:<span class="number">0.000000</span></div><div class="line">......</div></pre></td></tr></table></figure>
<p>ä¸ºäº†ç®€ä¾¿ï¼Œçœç•¥äº†ä½™ä¸‹çš„æ•°æ®ã€‚ä¸Šé¢çš„æ•°æ®æ ¼å¼æ˜¯æŒ‰ç…§Ranklib readmeä¸­è¦æ±‚çš„æ ¼å¼ç»„ç»‡ï¼Œé™¤äº†è¡Œå·ä¹‹å¤–ï¼Œç¬¬ä¸€åˆ—æ˜¯query-docå¯¹çš„å®é™…labelï¼ˆäººå·¥æ ‡æ³¨æ•°æ®ï¼‰ï¼Œç¬¬äºŒåˆ—æ˜¯qidï¼Œåé¢10åˆ—éƒ½æ˜¯featureã€‚</p>
<p>è¿™ä»½æ•°æ®æ¯ç»„qidä¸­çš„docåˆå§‹é¡ºåºå¯ä»¥æ˜¯éšæœºçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»å®é™…çš„ç³»ç»Ÿä¸­è·å¾—çš„é¡ºåºï¼Œæ€»ä¹‹è¿™ä¸ªæ˜¯è®¡ç®—ndcgçš„åˆå§‹çŠ¶æ€ã€‚å¯¹äºqid=1830ï¼Œå®ƒçš„10ä¸ªdocçš„åˆå§‹é¡ºåºçš„labelåºåˆ—æ˜¯ï¼š0, 0, 0, 1, 1, 0, 1, 1, 0, 0(å®é™…ä¸­labelå¯ä»¥æ‰©å±•ä¸º1ï¼Œ2ï¼Œ3ï¼Œ4ç­‰ï¼Œæ ¹æ®æ•°æ®è‡ªè¡Œå†³å®š)ã€‚dcgçš„è®¡ç®—å…¬å¼ä¸ºï¼š</p>
<span>$$\begin{gather*}
dcg(i)=\frac{2^{l a b e l(i)}-1}{\log _{2}(i+1)}
\end{gather*}$$</span><!-- Has MathJax -->
<p>iè¡¨ç¤ºå½“å‰docåœ¨è¿™ä¸ªqidä¸‹çš„ä½ç½®ï¼ˆä»1å¼€å§‹ï¼Œé¿å…åˆ†æ¯ä¸º0ï¼‰ï¼Œlabel(i)æ˜¯doc(i)çš„æ ‡æ³¨å€¼ã€‚è€Œä¸€ä¸ªqueryçš„dcgåˆ™æ˜¯å…¶ä¸‹æ‰€æœ‰docçš„åŠ å’Œï¼š</p>
<span>$$\begin{gather*}
dcg(query)=\sum_{i} \frac{2^{l a b e l(i)}-1}{\log _{2}(i+1)}
\end{gather*}$$</span><!-- Has MathJax -->
<p>æ ¹æ®ä¸Šå¼å¯ä»¥è®¡ç®—åˆå§‹çŠ¶æ€ä¸‹æ¯ä¸ªqidçš„dcgï¼š</p>
<span>$$\begin{gather*}

\begin{aligned} d c g(q i d=1830) &amp;=\frac{2^{0}-1}{\log _{2}(1+1)}+\frac{2^{0}-1}{\log _{2}(2+1)}+\ldots+\frac{2^{0}-1}{\log _{2}(10+1)} \\ &amp;=0+0+0+0.431+0.387+0+0.333+0.315+0 \\ &amp;+0=1.466 \end{aligned}
\end{gather*}$$</span><!-- Has MathJax -->
<p>è¦è®¡ç®—ndcgï¼Œè¿˜éœ€è¦è®¡ç®—ç†æƒ³é›†çš„dcgï¼Œå°†åˆå§‹çŠ¶æ€æŒ‰ç…§labelæ’åºï¼Œqid=1830å¾—åˆ°çš„åºåˆ—æ˜¯1,1,1,1,0,0,0,0,0,0ï¼Œè®¡ç®—dcg:</p>
<span>$$\begin{gather*}
ideal_dcg(qid =1830) =\frac{2^{1}-1}{\log _{2}(1+1)}+\frac{2^{1}-1}{\log _{2}(2+1)}+\ldots
\begin{aligned}+\frac{2^{0}-1}{\log _{2}(10+1)} &amp; \\ &amp;=1+0.631+0.5+0.431+0+0+0+0+0+0 \\ &amp;=2.562 \end{aligned}
\end{gather*}$$</span><!-- Has MathJax -->
<p>ä¸¤è€…ç›¸é™¤å¾—åˆ°åˆå§‹çŠ¶æ€ä¸‹qid=1830çš„ndcg:</p>
<span>$$\begin{gather*}

ndcg(qid=1830)=\frac{dcg(qid=1830)}{ideal_{-} ndcg(qid=1830)}=\frac{1.466}{2.562}=0.572

\end{gather*}$$</span><!-- Has MathJax -->
<p>ä¸‹é¢è¦è®¡ç®—æ¯ä¸€ä¸ªdocçš„deltaNDCGï¼Œå…¬å¼å¦‚ä¸‹ï¼š</p>
<span>$$\begin{gather*}
\begin{array}{c}
\operatorname{deltaNDCG}(i, j) \\
=| \text {ndcg(original sequence) }-ndcg(\operatorname{swap}(i, j) \text { sequence }) |
\end{array}
\end{gather*}$$</span><!-- Has MathJax -->
<p>deltaNDCG(i,j)æ˜¯å°†ä½ç½®iå’Œä½ç½®jçš„ä½ç½®äº’æ¢åäº§ç”Ÿçš„ndcgå˜åŒ–ï¼ˆå…¶ä»–ä½ç½®å‡ä¸å˜ï¼‰ï¼Œæ˜¾ç„¶æœ‰ç›¸åŒlabelçš„deltaNDCG(i,j)=0ã€‚åœ¨qid=1830çš„åˆå§‹åºåˆ—0, 0, 0, 1, 1, 0, 1, 1, 0, 0ï¼Œç”±äºå‰3çš„labeléƒ½ä¸€æ ·ï¼Œæ‰€ä»¥deltaNDCG(1,2)=deltaNDCG(1,3)=0ï¼Œä¸ä¸º0çš„æ˜¯deltaNDCG(1,4), deltaNDCG(1,5), deltaNDCG(1,7), deltaNDCG(1,8)ã€‚å°†1ï¼Œ4ä½ç½®äº’æ¢ï¼Œåºåˆ—å˜ä¸º1, 0, 0, 0, 1, 0, 1, 1, 0, 0ï¼Œè®¡ç®—å¾—åˆ°dcg=2.036ï¼Œæ•´ä¸ªdeltaNDCG(1,4)çš„è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<span>$$\begin{gather*}
\begin{array}{l}
\qquad \begin{array}{l}
dcg(q i d=1830, \operatorname{swap}(1,4))=\frac{2^{1}-1}{\log _{2}(1+1)}+\frac{2^{0}-1}{\log _{2}(2+1)}+\ldots \\
+\frac{2^{0}-1}{\log _{2}(10+1)}
\end{array} \\
=1+0+0+0+0.387+0+0.333+0.315+0+0 \\
=2.036
\end{array}
\end{gather*}$$</span><!-- Has MathJax -->
<span>$$\begin{gather*}
\begin{array}{l}
n d c g(swap(1,4))=\frac{d c g(swap(1,4))}{ideal_{-} dcg}=\frac{2.036}{2.562}=0.795 \\
\text {deltaNDCG}(1,4)=\operatorname{detal} N D C G(4,1) \\
=| \text {ndcg}(\text {original sequence})-\text {ndcg}(\operatorname{swap}(1,4)) | \\
=|0.572-0.795|=0.222
\end{array}
\end{gather*}$$</span><!-- Has MathJax -->
<p>åŒæ ·è¿‡ç¨‹å¯ä»¥è®¡ç®—å‡ºdeltaNDCG(1,5)=0.239, deltaNDCG(1,7)=0.260, deltaNDCG(1,8)=0.267ç­‰ã€‚</p>
<p>è¿›ä¸€æ­¥ï¼Œè¦è®¡ç®—lambda(i)ï¼Œæ ¹æ®paperï¼Œè¿˜éœ€è¦Ïå€¼ï¼ŒÏå¯ä»¥ç†è§£ä¸º$doc_i$æ¯”$doc_j$å·®çš„æ¦‚ç‡ï¼Œå…¶è®¡ç®—å…¬å¼ä¸ºï¼š</p>
<span>$\rho_{i j}=\frac{1}{1+e^{\sigma\left(s_{i}-s_{j}\right)}}$</span><!-- Has MathJax -->
<p>å‚è€ƒ<a href="[http://octopuscoder.github.io/2020/01/19/%E6%90%9C%E7%B4%A2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/](http://octopuscoder.github.io/2020/01/19/æœç´¢æ’åºç®—æ³•/">æœç´¢æ’åºç®—æ³•</a>)ä¸­å…³äºLambdaRankçš„ä»‹ç»ï¼š</p>
<span>$$\begin{gather*}

\lambda_{i j}=\frac{\partial C\left(s_{i}-s_{j}\right)}{\partial s_{i}}=\frac{-\sigma}{1+e^{\sigma\left(s_{i}-s_{j}\right)}}\left|\Delta_{N D C G}\right|

\end{gather*}$$</span><!-- Has MathJax -->
<p>Ranklibä¸­ç›´æ¥å–Ïƒ=1ï¼Œå¦‚ä¸‹å›¾ï¼Œè“ï¼Œçº¢ï¼Œç»¿ä¸‰ç§é¢œè‰²åˆ†åˆ«å¯¹åº”Ïƒ=1ï¼Œ2ï¼Œ4æ—¶Ïå‡½æ•°çš„æ›²çº¿æƒ…å½¢ï¼ˆæ¨ªåæ ‡æ˜¯<span>$s_i-s_j$</span><!-- Has MathJax -->ï¼‰:</p>
<p>åˆå§‹æ—¶ï¼Œæ¨¡å‹ä¸ºç©ºï¼Œæ‰€æœ‰æ¨¡å‹é¢„æµ‹å¾—åˆ†éƒ½æ˜¯0ï¼Œæ‰€ä»¥<span>$s_i=s_j=0ï¼Œ&rho;_{ij}=1/2$</span><!-- Has MathJax -->ï¼Œlambda(i,j)çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p>
<span>$$\begin{gather*}

\lambda_{i j}=\rho_{i j} *|\operatorname{deltaNDCG}(i, j)|

\end{gather*}$$</span><!-- Has MathJax -->
<p>ä¸Šå¼ä¸ºRanklibä¸­å®é™…ä½¿ç”¨çš„å…¬å¼ï¼Œè€Œåœ¨paperä¸­ï¼Œè¿˜éœ€è¦å†ä¹˜ä»¥-Ïƒï¼Œåœ¨Ïƒ=1æ—¶ï¼Œå°±æ˜¯ç¬¦å·æ­£å¥½ç›¸åï¼Œè¿™ä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„ï¼Œç¬¦å·å¹¶ä¸å½±å“æ¨¡å‹è®­ç»ƒç»“æœï¼ˆå…¶å®å¤§å¯ä»¥æŠŠä»£ç ä¸­lambdaçš„å€¼å‰é¢åŠ ä¸€ä¸ªè´Ÿå·ï¼Œåªæ˜¯æ³¨æ„åœ¨æ¯è½®è®¡ç®—train, validå’Œæœ€åè®¡ç®—testçš„ndcgçš„æ—¶å€™ï¼Œæ¨¡å‹é¢„æµ‹çš„å¾—åˆ†modelScoresè¦æŒ‰å‡åºæ’åˆ—â€”â€”è¶Šè´Ÿçš„docè¶Šå¥½ï¼Œè€Œä¸æ˜¯æºä»£ç ä¸­æŒ‰é™åºã€‚æœ€åè®­ç»ƒå‡ºçš„æ¨¡å‹æ˜¯ä¸€æ ·çš„ï¼Œè¿™è¯´æ˜è¿™ä¸¤ç§æ–¹å¼å®Œå…¨å¯¹ç§°ï¼Œæ‰€ä»¥ç¬¦å·çš„é—®é¢˜å¯ä»¥çœç•¥ã€‚ç”šè‡³ä¸ä¹˜ä»¥-Ïƒï¼Œæ›´ç¬¦åˆäººçš„ä¹ æƒ¯â€”â€”åˆ†æ•°è¶Šå¤§è¶Šå¥½ï¼Œé™åºæ’åˆ—ç»“æœã€‚ï¼‰ï¼š</p>
<span>$$\begin{gather*}

\lambda_{i}=\sum_{j(l a b e l(i)&gt;l a b e l(j))} \lambda_{i j}-\sum_{j(label(i)&lt;label(j))} \lambda_{i j}

\end{gather*}$$</span><!-- Has MathJax -->
<p>è®¡ç®—<span>$\lambda_{1}$</span><!-- Has MathJax -->ï¼Œç”±äºlabel(1)=0ï¼Œqid=1830ä¸­çš„å…¶ä»–docçš„labeléƒ½å¤§äºæˆ–è€…ç­‰äº0ï¼Œæ‰€ä»¥<span>$\lambda_{1}$</span><!-- Has MathJax -->çš„è®¡ç®—ä¸­æ‰€æœ‰çš„<span>$\lambda_{1,j}$</span><!-- Has MathJax -->éƒ½ä¸ºè´Ÿé¡¹ã€‚å°†ä¹‹å‰è®¡ç®—çš„å„<span>$deltaNDCG(1,j)$</span><!-- Has MathJax -->ä»£å…¥ï¼Œä¸”åˆå§‹çŠ¶æ€ä¸‹<span>$&rho;_{ij}=1/2$</span><!-- Has MathJax -->ï¼Œæ‰€ä»¥:</p>
<span>$$\begin{gather*}*

\begin{aligned}
\lambda_{1} &amp;=-0.5 *(\text {deltaNDCG}(1,3)+\text {deltaNDCG}(1,4)+\text {deltaNDCG}(1,6)+\text {deltaNDCG}(1,7)) \\
&amp;=-0.5 *(0.222+0.239+0.260+0.267)=-0.495
\end{aligned}

\end{gather*}$$</span><!-- Has MathJax -->
<p>å¯ä»¥è®¡ç®—å‡ºåˆå§‹çŠ¶æ€ä¸‹qid=1830å„ä¸ªdocçš„lambdaå€¼ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">qId=<span class="number">1830</span>    <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">-0.111</span>  <span class="number">-0.120</span>  <span class="number">0.000</span>   <span class="number">-0.130</span>  <span class="number">-0.134</span>  <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="keyword">lambda</span>(<span class="number">1</span>): <span class="number">-0.495</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">-0.039</span>  <span class="number">-0.048</span>  <span class="number">0.000</span>   <span class="number">-0.058</span>  <span class="number">-0.062</span>  <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="keyword">lambda</span>(<span class="number">2</span>): <span class="number">-0.206</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">-0.014</span>  <span class="number">-0.022</span>  <span class="number">0.000</span>   <span class="number">-0.033</span>  <span class="number">-0.036</span>  <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="keyword">lambda</span>(<span class="number">3</span>): <span class="number">-0.104</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">0.111</span>   <span class="number">0.039</span>   <span class="number">0.014</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.015</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.025</span>   <span class="number">0.028</span>   <span class="keyword">lambda</span>(<span class="number">4</span>): <span class="number">0.231</span> </div><div class="line">qId=<span class="number">1830</span>    <span class="number">0.120</span>   <span class="number">0.048</span>   <span class="number">0.022</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.006</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.017</span>   <span class="number">0.019</span>   <span class="keyword">lambda</span>(<span class="number">5</span>): <span class="number">0.231</span> </div><div class="line">qId=<span class="number">1830</span>    <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">-0.015</span>  <span class="number">-0.006</span>  <span class="number">0.000</span>   <span class="number">-0.004</span>  <span class="number">-0.008</span>  <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="keyword">lambda</span>(<span class="number">6</span>): <span class="number">-0.033</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">0.130</span>   <span class="number">0.058</span>   <span class="number">0.033</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.004</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.006</span>   <span class="number">0.009</span>   <span class="keyword">lambda</span>(<span class="number">7</span>): <span class="number">0.240</span> </div><div class="line">qId=<span class="number">1830</span>    <span class="number">0.134</span>   <span class="number">0.062</span>   <span class="number">0.036</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.008</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.003</span>   <span class="number">0.005</span>   <span class="keyword">lambda</span>(<span class="number">8</span>): <span class="number">0.247</span> </div><div class="line">qId=<span class="number">1830</span>    <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">-0.025</span>  <span class="number">-0.017</span>  <span class="number">0.000</span>   <span class="number">-0.006</span>  <span class="number">-0.003</span>  <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="keyword">lambda</span>(<span class="number">9</span>): <span class="number">-0.051</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="number">-0.028</span>  <span class="number">-0.019</span>  <span class="number">0.000</span>   <span class="number">-0.009</span>  <span class="number">-0.005</span>  <span class="number">0.000</span>   <span class="number">0.000</span>   <span class="keyword">lambda</span>(<span class="number">10</span>): <span class="number">-0.061</span></div></pre></td></tr></table></figure>
<p>ä¸Šè¡¨ä¸­æ¯ä¸€åˆ—éƒ½æ˜¯è€ƒè™‘äº†ç¬¦å·çš„<span>$\lambda_{i,j}$</span><!-- Has MathJax -->ï¼Œå³å¦‚æœlabel(i)<label(j)ï¼Œåˆ™ä¸ºè´Ÿå€¼ï¼Œåä¹‹ä¸ºæ­£å€¼ï¼Œæ¯è¡Œç»“å°¾çš„<span>$\lambda_i$<!-- Has MathJax -->æ˜¯å‰é¢çš„åŠ å’Œï¼Œå³ä¸ºæœ€ç»ˆçš„<span>$\lambda_i$</span><!-- Has MathJax -->ã€‚å¯ä»¥çœ‹åˆ°ï¼Œ<span>$\lambda_i$</span><!-- Has MathJax -->åœ¨ç³»ç»Ÿä¸­è¡¨è¾¾äº†<span>$doc_i$</span><!-- Has MathJax -->ä¸Šå‡æˆ–è€…ä¸‹é™çš„å¼ºåº¦ï¼Œlabelè¶Šé«˜ï¼Œä½ç½®è¶Šåï¼Œ<span>$\lambda_i$</span><!-- Has MathJax -->ä¸ºæ­£å€¼ï¼Œè¶Šå¤§ï¼Œè¡¨ç¤ºè¶‹å‘ä¸Šå‡çš„æ–¹å‘ï¼ŒåŠ›åº¦ä¹Ÿè¶Šå¤§ï¼›labelè¶Šå°ï¼Œä½ç½®è¶Šé å‰ï¼Œ<span>$\lambda_i$</span><!-- Has MathJax -->ä¸ºè´Ÿå€¼ï¼Œè¶Šå°ï¼Œè¡¨ç¤ºè¶‹å‘ä¸‹é™çš„æ–¹å‘ï¼ŒåŠ›åº¦ä¹Ÿå¤§ï¼ˆ<span>$\lambda_i$</span><!-- Has MathJax -->çš„ç»å¯¹å€¼è¡¨è¾¾äº†ä¸Šå‡ã€ä¸‹é™çš„å¼ºåº¦ï¼‰ã€‚</label(j)ï¼Œåˆ™ä¸ºè´Ÿå€¼ï¼Œåä¹‹ä¸ºæ­£å€¼ï¼Œæ¯è¡Œç»“å°¾çš„<span></p>
<p>å®Œæˆå„docçš„<span>$\lambda$</span><!-- Has MathJax -->å€¼è®¡ç®—åï¼ŒRegression Treeä¾¿å¼€å§‹ä»¥æ¯ä¸ªdocçš„<span>$\lambda$</span><!-- Has MathJax -->å€¼ä¸ºç›®æ ‡ï¼Œè®­ç»ƒæ¨¡å‹ã€‚å¹¶åœ¨æœ€åå¯¹å¶å­èŠ‚ç‚¹ä¸Šçš„æ ·æœ¬ <span>$\lambda$</span><!-- Has MathJax -->å‡å€¼è¿˜åŸæˆ ğ›¾ ï¼Œä¹˜ä»¥learningRateåŠ åˆ°æ­¤å‰çš„Regression Treesä¸Šï¼Œæ›´æ–°scoreï¼Œé‡æ–°å¯¹queryä¸‹çš„docæŒ‰scoreæ’åºï¼Œå†æ¬¡è®¡ç®—deltaNDCGä»¥åŠ Î» ï¼Œå¦‚æ­¤è¿­ä»£ä¸‹å»ç›´è‡³æ ‘çš„æ•°ç›®è¾¾åˆ°å‚æ•°è®¾å®šæˆ–è€…åœ¨validationé›†ä¸Šä¸å†æŒç»­å˜å¥½ï¼ˆä¸€èˆ¬å®è·µæ¥è¯´ä¸åœ¨æ¨¡å‹è®­ç»ƒæ—¶è®¾ç½®validationé›†åˆï¼Œå› ä¸ºvalidationé›†åˆä¸€èˆ¬æ¯”è®­ç»ƒé›†åˆå°å¾ˆå¤šï¼Œå¾ˆå®¹æ˜“æ”¶æ•›ï¼Œè¾¾ä¸åˆ°æ•ˆæœï¼Œä¸å¦‚è®­ç»ƒæ—¶ä¸€æ­¥åˆ°ä½ï¼Œç„¶åå¦èµ·testé›†åˆåšç»“æœè¯„ä¼°ï¼‰ã€‚</p>
<p>Regression Treeçš„è®­ç»ƒæœ€ä¸»è¦çš„å°±æ˜¯å†³å®šå¦‚ä½•åˆ†è£‚èŠ‚ç‚¹ã€‚lambdaMARTé‡‡ç”¨æœ€æœ´ç´ çš„æœ€å°äºŒä¹˜æ³•ï¼Œä¹Ÿå°±æ˜¯æœ€å°åŒ–å¹³æ–¹è¯¯å·®å’Œæ¥åˆ†è£‚èŠ‚ç‚¹ï¼šå³å¯¹äºæŸä¸ªé€‰å®šçš„featureï¼Œé€‰å®šä¸€ä¸ªå€¼valï¼Œæ‰€æœ‰&lt;=valçš„æ ·æœ¬åˆ†åˆ°å·¦å­èŠ‚ç‚¹ï¼Œ&gt;valçš„åˆ†åˆ°å³å­èŠ‚ç‚¹ã€‚ç„¶ååˆ†åˆ«å¯¹å·¦å³ä¸¤ä¸ªèŠ‚ç‚¹è®¡ç®—å¹³æ–¹è¯¯å·®å’Œï¼Œå¹¶åŠ åœ¨ä¸€èµ·ä½œä¸ºè¿™æ¬¡åˆ†è£‚çš„ä»£ä»·ã€‚éå†æ‰€æœ‰featureä»¥åŠæ‰€æœ‰å¯èƒ½çš„åˆ†è£‚ç‚¹val(æ¯ä¸ªfeatureæŒ‰å€¼æ’åºï¼Œæ¯ä¸ªä¸åŒçš„å€¼éƒ½æ˜¯å¯èƒ½çš„åˆ†è£‚ç‚¹)ï¼Œåœ¨è¿™äº›åˆ†è£‚ä¸­æ‰¾åˆ°ä»£ä»·æœ€å°çš„ã€‚</p>
<p>ç»§ç»­ä¸Šé¢çš„ä¾‹å­ï¼Œå‡è®¾æ ·æœ¬åªæœ‰ä¸Šé¢è®¡ç®—å‡º Î» çš„10ä¸ªï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">qId=<span class="number">1830</span> features <span class="keyword">and</span> lambdas</div><div class="line">qId=<span class="number">1830</span>    <span class="number">1</span>:<span class="number">0.003</span> <span class="number">2</span>:<span class="number">0.000</span> <span class="number">3</span>:<span class="number">0.000</span> <span class="number">4</span>:<span class="number">0.000</span> <span class="number">5</span>:<span class="number">0.003</span> <span class="number">6</span>:<span class="number">0.000</span> <span class="number">7</span>:<span class="number">0.000</span> <span class="number">8</span>:<span class="number">0.000</span> <span class="number">9</span>:<span class="number">0.000</span> <span class="number">10</span>:<span class="number">0.000</span>    <span class="keyword">lambda</span>(<span class="number">1</span>):<span class="number">-0.495</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">1</span>:<span class="number">0.026</span> <span class="number">2</span>:<span class="number">0.125</span> <span class="number">3</span>:<span class="number">0.000</span> <span class="number">4</span>:<span class="number">0.000</span> <span class="number">5</span>:<span class="number">0.027</span> <span class="number">6</span>:<span class="number">0.000</span> <span class="number">7</span>:<span class="number">0.000</span> <span class="number">8</span>:<span class="number">0.000</span> <span class="number">9</span>:<span class="number">0.000</span> <span class="number">10</span>:<span class="number">0.000</span>    <span class="keyword">lambda</span>(<span class="number">2</span>):<span class="number">-0.206</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">1</span>:<span class="number">0.001</span> <span class="number">2</span>:<span class="number">0.000</span> <span class="number">3</span>:<span class="number">0.000</span> <span class="number">4</span>:<span class="number">0.000</span> <span class="number">5</span>:<span class="number">0.001</span> <span class="number">6</span>:<span class="number">0.000</span> <span class="number">7</span>:<span class="number">0.000</span> <span class="number">8</span>:<span class="number">0.000</span> <span class="number">9</span>:<span class="number">0.000</span> <span class="number">10</span>:<span class="number">0.000</span>    <span class="keyword">lambda</span>(<span class="number">3</span>):<span class="number">-0.104</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">1</span>:<span class="number">0.189</span> <span class="number">2</span>:<span class="number">0.375</span> <span class="number">3</span>:<span class="number">0.333</span> <span class="number">4</span>:<span class="number">1.000</span> <span class="number">5</span>:<span class="number">0.196</span> <span class="number">6</span>:<span class="number">0.000</span> <span class="number">7</span>:<span class="number">0.000</span> <span class="number">8</span>:<span class="number">0.000</span> <span class="number">9</span>:<span class="number">0.000</span> <span class="number">10</span>:<span class="number">0.000</span>    <span class="keyword">lambda</span>(<span class="number">4</span>):<span class="number">0.231</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">1</span>:<span class="number">0.078</span> <span class="number">2</span>:<span class="number">0.500</span> <span class="number">3</span>:<span class="number">0.667</span> <span class="number">4</span>:<span class="number">0.000</span> <span class="number">5</span>:<span class="number">0.086</span> <span class="number">6</span>:<span class="number">0.000</span> <span class="number">7</span>:<span class="number">0.000</span> <span class="number">8</span>:<span class="number">0.000</span> <span class="number">9</span>:<span class="number">0.000</span> <span class="number">10</span>:<span class="number">0.000</span>    <span class="keyword">lambda</span>(<span class="number">5</span>):<span class="number">0.231</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">1</span>:<span class="number">0.075</span> <span class="number">2</span>:<span class="number">0.125</span> <span class="number">3</span>:<span class="number">0.333</span> <span class="number">4</span>:<span class="number">0.000</span> <span class="number">5</span>:<span class="number">0.078</span> <span class="number">6</span>:<span class="number">0.000</span> <span class="number">7</span>:<span class="number">0.000</span> <span class="number">8</span>:<span class="number">0.000</span> <span class="number">9</span>:<span class="number">0.000</span> <span class="number">10</span>:<span class="number">0.000</span>    <span class="keyword">lambda</span>(<span class="number">6</span>):<span class="number">-0.033</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">1</span>:<span class="number">0.079</span> <span class="number">2</span>:<span class="number">0.250</span> <span class="number">3</span>:<span class="number">0.667</span> <span class="number">4</span>:<span class="number">0.000</span> <span class="number">5</span>:<span class="number">0.085</span> <span class="number">6</span>:<span class="number">0.000</span> <span class="number">7</span>:<span class="number">0.000</span> <span class="number">8</span>:<span class="number">0.000</span> <span class="number">9</span>:<span class="number">0.000</span> <span class="number">10</span>:<span class="number">0.000</span>    <span class="keyword">lambda</span>(<span class="number">7</span>):<span class="number">0.240</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">1</span>:<span class="number">0.148</span> <span class="number">2</span>:<span class="number">0.000</span> <span class="number">3</span>:<span class="number">0.000</span> <span class="number">4</span>:<span class="number">0.000</span> <span class="number">5</span>:<span class="number">0.148</span> <span class="number">6</span>:<span class="number">0.000</span> <span class="number">7</span>:<span class="number">0.000</span> <span class="number">8</span>:<span class="number">0.000</span> <span class="number">9</span>:<span class="number">0.000</span> <span class="number">10</span>:<span class="number">0.000</span>    <span class="keyword">lambda</span>(<span class="number">8</span>):<span class="number">0.247</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">1</span>:<span class="number">0.059</span> <span class="number">2</span>:<span class="number">0.000</span> <span class="number">3</span>:<span class="number">0.000</span> <span class="number">4</span>:<span class="number">0.000</span> <span class="number">5</span>:<span class="number">0.059</span> <span class="number">6</span>:<span class="number">0.000</span> <span class="number">7</span>:<span class="number">0.000</span> <span class="number">8</span>:<span class="number">0.000</span> <span class="number">9</span>:<span class="number">0.000</span> <span class="number">10</span>:<span class="number">0.000</span>    <span class="keyword">lambda</span>(<span class="number">9</span>):<span class="number">-0.051</span></div><div class="line">qId=<span class="number">1830</span>    <span class="number">1</span>:<span class="number">0.071</span> <span class="number">2</span>:<span class="number">0.125</span> <span class="number">3</span>:<span class="number">0.333</span> <span class="number">4</span>:<span class="number">0.000</span> <span class="number">5</span>:<span class="number">0.074</span> <span class="number">6</span>:<span class="number">0.000</span> <span class="number">7</span>:<span class="number">0.000</span> <span class="number">8</span>:<span class="number">0.000</span> <span class="number">9</span>:<span class="number">0.000</span> <span class="number">10</span>:<span class="number">0.000</span>    <span class="keyword">lambda</span>(<span class="number">10</span>):<span class="number">-0.061</span></div></pre></td></tr></table></figure>
<p>ä¸Šè¡¨ä¸­é™¤äº†ç¬¬ä¸€åˆ—æ˜¯qidï¼Œæœ€åä¸€åˆ—æ˜¯lambdaå¤–ï¼Œå…¶ä½™éƒ½æ˜¯featureï¼Œæ¯”å¦‚æˆ‘ä»¬é€‰æ‹©feature(1)çš„0.059åšåˆ†è£‚ç‚¹ï¼Œåˆ™å·¦å­èŠ‚ç‚¹&lt;=0.059çš„docæœ‰: 1, 2, 3, 9ï¼›è€Œ&gt;0.059çš„è¢«å®‰æ’åˆ°å³å­èŠ‚ç‚¹ï¼Œdocæœ‰4, 5, 6, 7, 8, 10ã€‚ç”±æ­¤å·¦å³ä¸¤ä¸ªå­èŠ‚ç‚¹çš„lambdaå‡å€¼åˆ†åˆ«ä¸ºï¼š</p>
<span>$$\begin{gather*}

\bar{\lambda}_{L}=\frac{\lambda_{1}+\lambda_{2}+\lambda_{3}+\lambda 9}{4}=\frac{-0.495-0.206-0.104-0.051}{4}=-0.214

\end{gather*}$$</span><!-- Has MathJax -->
<span>$$\begin{gather*}
\begin{array}{l}
\lambda_{R}^{-}=\frac{\lambda_{4}+\lambda_{5}+\lambda_{6}+\lambda 7+\lambda_{8}+\lambda_{10}}{6} \\
=\frac{0.231+0.231-0.033+0.240+0.247-0.061}{6}=0.143
\end{array}
\end{gather*}$$</span><!-- Has MathJax -->
<p>ç»§ç»­è®¡ç®—å·¦å³å­èŠ‚ç‚¹çš„å¹³æ–¹è¯¯å·®å’Œï¼š</p>
<span>$$\begin{gather*}
\begin{aligned}
&amp;s_{L}=\sum_{i \in L}\left(\lambda_{i}-\bar{\lambda}_{L}\right)^{2}=(-0.495+0.214)^{2}\\
&amp;+(-0.206+0.214)^{2}+(-0.104+0.214)^{2}\\
&amp;+(-0.051+0.214)^{2}=0.118\\
&amp;s_{R}=\sum_{i \in R}\left(\lambda_{i}-\bar{\lambda}_{R}\right)^{2}=(0.231-0.143)^{2}\\
&amp;+(0.231-0.143)^{2}+(-0.033-0.143)^{2}\\
&amp;+(0.240-0.143)^{2}+(0.247-0.143)^{2}\\
&amp;+(0.016-0.143)^{2}=0.083
\end{aligned}
\end{gather*}$$</span><!-- Has MathJax -->
<p>å› æ­¤å°†feature(1)çš„0.059ä½œä¸ºåˆ†è£‚ç‚¹æ—¶çš„å‡æ–¹å·®ï¼ˆåˆ†è£‚ä»£ä»·ï¼‰æ˜¯ï¼š</p>
<span>$$\begin{gather*}
\cos t_{0.059 @ \text { feature}(1)}=s_{L}+s_{R}=0.118+0.083=0.201
\end{gather*}$$</span><!-- Has MathJax -->
<p>æˆ‘ä»¬å¯ä»¥åƒä¸Šé¢é‚£æ ·éå†æ‰€æœ‰featureçš„ä¸åŒå€¼ï¼Œå°è¯•åˆ†è£‚ï¼Œè®¡ç®—Costï¼Œæœ€ç»ˆé€‰æ‹©æ‰€æœ‰å¯èƒ½åˆ†è£‚ä¸­æœ€å°Costçš„é‚£ä¸€ä¸ªä½œä¸ºåˆ†è£‚ç‚¹ã€‚ç„¶åå°†ğ‘ ğ¿å’Œğ‘ ğ‘… åˆ†åˆ«ä½œä¸ºå·¦å³å­èŠ‚ç‚¹çš„å±æ€§å­˜å‚¨èµ·æ¥ï¼Œå¹¶æŠŠåˆ†è£‚çš„æ ·æœ¬ä¹Ÿåˆ†åˆ«å­˜å‚¨åˆ°å·¦å³å­èŠ‚ç‚¹ä¸­ï¼Œç„¶åç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå§‹ç»ˆæŒ‰å¹³æ–¹è¯¯å·®å’Œsé™åºæ’å…¥æ–°åˆ†è£‚å‡ºçš„èŠ‚ç‚¹ï¼Œæ¯æ¬¡ä»è¯¥é˜Ÿåˆ—å¤´éƒ¨æ‹¿å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå¹¶åŸºäºè¿™ä¸ªèŠ‚ç‚¹ä¸Šçš„æ ·æœ¬ï¼‰è¿›è¡Œåˆ†è£‚ï¼ˆå³æœ€å¤§å‡æ–¹å·®ä¼˜å…ˆåˆ†è£‚ï¼‰ï¼Œç›´åˆ°æ ‘çš„åˆ†è£‚æ¬¡æ•°è¾¾åˆ°å‚æ•°è®¾å®šï¼ˆè®­ç»ƒæ—¶ä¼ å…¥çš„leafå€¼ï¼Œå¶å­èŠ‚ç‚¹çš„ä¸ªæ•°ä¸åˆ†è£‚æ¬¡æ•°ç­‰ä»·ï¼‰ã€‚è¿™æ ·å°±å®Œæˆäº†ä¸€æ£µRegression Treeçš„è®­ç»ƒã€‚</p>
<p>ä¸Šé¢è®²è¿°äº†ä¸€æ£µæ ‘çš„æ ‡å‡†åˆ†è£‚è¿‡ç¨‹ï¼Œæ­¤å¤–ï¼Œæ ‘çš„åˆ†è£‚è¿˜åŒ…å«äº†å…¶ä»–å‚æ•°è®¾å®šï¼Œä¾‹å¦‚å¶å­èŠ‚ç‚¹ä¸Šçš„æœ€å°‘æ ·æœ¬æ•°ï¼Œæ¯”å¦‚æˆ‘ä»¬è®¾å®šä¸º3ï¼Œåˆ™åœ¨feature(1)å¤„ï¼Œ0.001å’Œ0.003ä¸¤ä¸ªå€¼éƒ½ä¸èƒ½ä½œä¸ºåˆ†è£‚ç‚¹ï¼Œå› ä¸ºç”¨å®ƒä»¬åšåˆ†è£‚ç‚¹ï¼Œå·¦å­æ ‘çš„æ ·æœ¬æ•°åˆ†åˆ«æ˜¯1å’Œ2ï¼Œå‡&lt;3ã€‚å¶å­èŠ‚ç‚¹çš„æœ€å°‘æ ·æœ¬æ•°è¶Šå°ï¼Œæ¨¡å‹åˆ™æ‹Ÿåˆå¾—è¶Šå¥½ï¼Œå½“ç„¶ä¹Ÿå®¹æ˜“è¿‡æ‹Ÿåˆï¼ˆover-fittingï¼‰ï¼›åä¹‹å¦‚æœè®¾ç½®å¾—è¶Šå¤§ï¼Œæ¨¡å‹åˆ™å¯èƒ½æ¬ æ‹Ÿåˆï¼ˆunder-fittingï¼‰ï¼Œå®è·µä¸­å¯ä»¥ä½¿ç”¨cross validationçš„åŠæ³•æ¥å¯»æ‰¾æœ€ä½³çš„å‚æ•°è®¾å®šã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://zhuanlan.zhihu.com/p/57814935" target="_blank" rel="external">GBTã€GBDTã€GBRTä¸Xgboost</a></p>
<p><a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/MSR-TR-2010-82.pdf" target="_blank" rel="external">From RankNet to LambdaRank to LambdaMART: An Overview</a></p>
<p><a href="https://www.cnblogs.com/wowarsenal/p/3900359.html" target="_blank" rel="external">LambdaMARTç®€ä»‹â€”â€”åŸºäºRanklibæºç </a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/01/19/æœç´¢æ’åºç®—æ³•/" rel="next" title="æœç´¢æ’åºç®—æ³•">
                <i class="fa fa-chevron-left"></i> æœç´¢æ’åºç®—æ³•
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="/images/avatar.gif"
              alt="Jeb" />
          
            <p class="site-author-name" itemprop="name">Jeb</p>
            <p class="site-description motion-element" itemprop="description">æˆ‘èœæ•…æˆ‘åœ¨</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Lambda"><span class="nav-number">1.</span> <span class="nav-text">Lambda</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MART"><span class="nav-number">2.</span> <span class="nav-text">MART</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#æå‡æ ‘"><span class="nav-number">2.1.</span> <span class="nav-text">æå‡æ ‘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XBGoost"><span class="nav-number">2.2.</span> <span class="nav-text">XBGoost</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#LambdaMART"><span class="nav-number">3.</span> <span class="nav-text">LambdaMART</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å‚è€ƒèµ„æ–™"><span class="nav-number">4.</span> <span class="nav-text">å‚è€ƒèµ„æ–™</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jeb</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
